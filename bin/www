const app = require("../server")
const mongoose = require("mongoose");
const PORT = process.env.PORT || 5000;
const mongoURL = process.env.MONGO_URL || "mongodb://localhost:27017/ventwork_db"

mongoose.Promise = global.Promise

mongoose.connect(mongoURL)

const onError = error => {
  console.log(error, "error")
}

const onListening = () => {
  if(!process.env.API_URL) {
    console.log("Server is running on http://localhost:5000")
  }
}

app
  .listen(PORT)
  .on("error",onError)
  .on("listening",onListening)